<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/herald/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/herald/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/herald/css/styles.css?1610982289774457475">
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0">
<meta property="og:title" content="The Fair Efficacy Formula paper">
<meta name="author" content="Herald Authors">
<meta property="og:locale" content="en_US">
<meta name="description" content="Our fair efficacy formula for comparing proximity detection protocols">
<meta property="og:description" content="Our fair efficacy formula for comparing proximity detection protocols">
<link rel="canonical" href="https://vmware.github.io/herald/efficacy/paper">
<meta property="og:url" content="https://vmware.github.io/herald/efficacy/paper">
<meta property="og:site_name" content="Herald Project">
<script type="application/ld+json">
{"description":"Our fair efficacy formula for comparing proximity detection protocols","url":"https://vmware.github.io/herald/efficacy/paper","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://vmware.github.io/herald/herald/img/herald.png"},"name":"Herald Authors"},"author":{"@type":"Person","name":"Herald Authors"},"headline":"The Fair Efficacy Formula paper","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <title>Herald Project Docs - The Fair Efficacy Formula paper</title>



<body id="docs">
  <div class="container-fluid site-outer-container">
    <div class="site-container">
      <header class="site-header">
    <div class="site-header-content">
        <div class="logo">
            <a href="/herald/" aria-label="Herald homepage"><img src="/herald/img/herald.png" class="logo" alt="Homepage"></a>
        </div>
        <ul class="nav-menu" id="header-nav">
            <li class="home"><a href="/herald/" title="Herald Project">Home</a></li>
            <li class="blog"><a href="/herald/blog" title="Blog Posts">Blog</a></li>
            <li class="community"><a href="/herald/community" title="Community">Community</a></li>
            <li class="docs"><a href="/herald/docs">Documentation</a></li>
            <li class="efficacy"><a href="/herald/efficacy" title="Efficacy Paper">Efficacy Paper</a></li>
        </ul>
        <div class="nav-mobile-link">
            <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
        </div>
    </div>
</header>
      <div class="post-single-hero bg-color-med-blue">
        <div class="section">
            <div class="section-content">
              <h1>The Fair Efficacy Formula paper</h1>
            </div>
        </div>
      </div>
        <div class="post-single-body">
        <div class="section section-card">
            <div class="section-content pt-4 pb-0">
              <div class="row">
                <div class="col-md-3">
                 <div class="row">
    <div class="dropdown mb-2">
        
            <span></span>
        
    </div>
</div>
                <nav class="navigation">
  <!-- If new pages are added to the site and the TOC needs to be updated, it
  can be overridden, using toc-mapping.yml -->
  

  
  <h5>Efficacy</h5>
  <ul>
    
    <li>
      
        <a href="/herald/efficacy">Introduction</a>
      
    </li>
    
    <li>
      
        <a href="/herald/efficacy/paper">The Fair Measure Paper</a>
      
    </li>
    
    <li>
      
        <a href="/herald/efficacy/method">Testing Methodology</a>
      
    </li>
    
    <li>
      
        <a href="/herald/efficacy/results">Test Results</a>
      
    </li>
    
    <li>
      
        <a href="/herald/efficacy/statistics">Statistics</a>
      
    </li>
    
    <li>
      
        <a href="/herald/efficacy/herald">Herald Performance</a>
      
    </li>
    
    <li>
      
        <a href="/herald/efficacy/bibliography">Bibliography</a>
      
    </li>
    
  </ul>
  
</nav>

                </div>
                <div class="col-md-8 offset-md-1">
                

  

                <h1 id="the-fair-efficacy-formula-paper">The Fair Efficacy Formula paper</h1>

<p>We took the efficacy measure mentioned in the Ferretti et al paper and reasoned
the constituent parts that affect the probability of detection of 30 second
segments of any contact event.</p>

<h2 id="where-can-i-get-the-paper">Where can I get the paper?</h2>

<p>The paper is now available on medRxiv here: <a href="https://www.medrxiv.org/content/10.1101/2020.11.07.20227447v1">https://www.medrxiv.org/content/10.1101/2020.11.07.20227447v1</a></p>

<h2 id="the-fair-efficacy-formula">The Fair Efficacy Formula</h2>

<p>The resultant formula is below:-</p>

<p><img src="/herald/images/paper-measure-formula.png" alt="Fair efficacy formula"></p>

<p>Where:-</p>

<ul>
  <li>ET is the ‘Efficacy of Contact Tracing’ as described in the Ferretti et al paper in March 2020 from the Oxford Big Data Institute</li>
  <li>‘Probability of detection’ as per the Ferretti et al paper, in mobile app terms rather than manual tracing terms, is the probability of detecting a person’s risk of exposure to COVID-19 and the efficacy of detecting, measuring, and basing health advice (such as please self isolate for 10-14 days) on this collected data, and crucially doing so the same day of knowing they were exposed by a positive case (in under 4 hours)</li>
  <li>Pspec - Population reach. In our paper we talk about maximum population reach as those who could download and make use of the app - i.e. the maximum population reach
    <ul>
      <li>Pspec-squared - As you need two phones to communicate in both directions to measure mutual exposure risk, you must square the Pspec value (as it applies to both phones in a contact)</li>
      <li>Pcountry - Proportion of people in a given country/area of interest that have a mobile phone (taken as smartphone, rather than tablets of course)</li>
      <li>Phardware - Those with hardware that supports the given protocol. Bluetooth Low Energy for the Herald Protocol. Other protocols have restrictions here. E.g. ~35% of Android phones do not support ‘Bluetooth advertising’ which means they cannot be detected by other phones. This is true of many other (non-Herald) bluetooth protocols for contact tracing</li>
      <li>Psoftware - Any software restrictions artificially made by the protocols design. E.g. some common protocols only support the latest phone operating systems, or use cryptographic libraries that are not available on all phones. This limits their reach, especially in poorer parts of the world or even in the UK in certain poorer areas</li>
    </ul>
  </li>
  <li>Rdetection - Rate of basic detection (one-way) of phones during any given scenario. This is separate from Rcontinuity as in practical tests a non detected phone would not appear in the totality of phones in Rcontinuity, and so we include it separately.</li>
  <li>Rcontinuity - The percentage of 30 second windows a distance estimation (RSSI reading for Bluetooth) ocurred (one-way). Choice of 30 seconds is described below.</li>
  <li>Rlongevity - A protocol that gets worse over time must have this reflected. This is how the rate of detection varies between the first hour of an at least 8 hour test and the last hour. This will ensure people are protected for an entire normal working day without intervening to their phone’s contact tracing app</li>
  <li>Raccuracy - How accurate the distance analogue (E.g. RSSI) reading is at a short period of time at a known distance compared to how its analogue reading is over a long time. A measure of estimator accuracy especially relevant to when short periods of close distance (highest risk) occur. Does NOT include error rate of converting analogue to distance and performing a risk calculation - this is the same for all formulae, and so is left to other papers to define in Risk Accuracy (See the Turing paper on risk measurement)</li>
  <li>Rcompleteness RT1 - How well a recorded set of data around the riskiest (nearest) point of a contact event fits actual exposure. Think of this logically (not numerically) as the first standard deviation around the mean risk exposure. Under the Oxford model the vast majority of risk is accrued at the nearest point of distance, and so this measure is used here.</li>
  <li>fracRE - This is a fixed (0.9) value as per the Ferretti et al paper. It is not 1.0 as to ensure the final efficacy rating does not appear ‘perfect’, as there are always unknown problems with measuring and communicating transmission. We recommend more work is done to define this value, and determine if it changes in certain situations in the real world.</li>
</ul>

<h2 id="why-is-it-needed">Why is it needed?</h2>

<p>There was no standardised way to measure proximity detection and continuity of
coverage of a contact event other than simple “Percentage of devices detected
during an entire test” style high level metrics.</p>

<p>Whilst useful, those simplistic metrics miss out a variety of low level Operating System, 
Hardware, and especially protocol behaviours that can lead to a misrepresentation or
misunderstanding of efficacy in epidemiological terms.</p>

<p>In short the simple measure tracks ‘detection of phones’ and not ‘detection of risk exposure’.
The fair efficacy formula presented in our paper (under peer review) does this.</p>

<p>Epidemiologists need to calculate exposure risk based on time and distance of any contact
event. The closer people are together, the higher risk. The length of the ‘exposure window’
will determine how fine grained such risk scores are. Performance across a range
of devices prevalent in a particular population will determine a protocol’s maximum reach.</p>

<p>All of these measures need to be understood in order to truly score and compare the
effectiveness of any Proximity Detection Protocol and therefore the contact tracing 
applications and health service responses built on this underpinning.</p>

<h2 id="why-is-it-fair">Why is it fair?</h2>

<p>We took a step back and considered what physically happens between two mobile devices
during a contact event. We then reasoned what actions could occur to reduce the chances
of a part (window) of a contact event from being correctly recorded.</p>

<p>We then created dummy data for a simple theoretical contact event. We then applied
an existing risk scoring model to show how a ‘perfect protocol’ and a protocol that
exhibits some deliberate limitation could modify the observed risk.</p>

<p>This then led us to create a formula that took in to account all limiting factors
that a user of such a contact tracing app could encounter in a particular day.</p>

<p>We then applied this formula to a brand new Bluetooth protocol called <a href="/herald/protocol">Herald</a>.
We were able to identify and rapidly tune this protocol in 5 weeks thanks to the presence
of the fair efficacy formula, and approaching the problem in an epidemiologially data driven
way.</p>

<h2 id="didnt-you-build-this-for-your-own-protocol-arent-you-biased">Didn’t you build this for your own protocol? Aren’t you biased?</h2>

<p>No. Although it is true that some of the authors of our paper and protocol worked on
previous COVID-19 app efforts for governments, we built this measure independent of any 
particular protocol and before we wrote our
new protocol from scratch. We wanted to be sure we could encourage all teams to
use our measure to communicate their own protocols’ effectiveness with their
country’s population. The hope is to increase the use of, and trust in, contact tracing
applications worldwide - no matter whose protocol they use.</p>

<p>Once we completed the design of the formula we created a new protocol based on our 
new knowledge of
what affects efficacy, and used the formula to test and measure its performance,
and directed our efforts at the mechanisms that would provide most epidemiological
advantage.</p>

<p>Our <a href="/herald/protocol">protocol</a> has therefore a high score on the measure,
but that’s because we’ve been using the formula and testing approach for longer.
The formula wasn’t designed to show our protocol in a good light. We would
encourage all teams to apply our formula to their work and rapidly iterate to improve 
their own efficacy. This way more lives can be saved.</p>

<h2 id="what-doesnt-it-cover">What doesn’t it cover?</h2>

<p>The paper does mention some items out of scope of our research that others are 
already working on, or where published material already exists. This includes:-</p>

<ul>
  <li>Converting distance analogue (E.g. RSSI in Bluetooth) to distance (Although we do mention some observations we have on <a href="/herald/bluetooth/distance">distance calibration</a>)</li>
  <li>Anything outside of the mobile phone - We only deal with phone to phone communication in our measure - we do not deal with isolation efficacy or speed to isolation metrics</li>
  <li>Any technology-specific variations - The measure is independent of any technology, although we often explain it in terms of Bluetooth because this is the predominant technology available today</li>
  <li>Manipulation of multiple readings - We leave these discussions to those designing end to end
contact tracing systems. Mechanisms include local triangulation to get a more accurate distance estimation, or performing multiple readings in quick succession to provide more accuracy</li>
  <li>Payload specifics - We use a 129 byte payload in our tests of our own protocol, but our measure does not mention this specifically. The affect of any such length of transmission on efficacy will be caught in the detection and continuity measures and so there was no need to consider payload specifics, only measure how often a particular protocol takes estimation readings for another device</li>
</ul>

<h2 id="data-from-the-paper">Data from the paper</h2>

<p>The synthetic data and calculations used in the paper can be found in the <a href="/herald/documents/protocols-paper-synthetic-data.ods">Synthetic Data Spreadsheet (ODS)</a></p>

<h2 id="follow-on-work">Follow on work</h2>

<p>From the paper: “Now a low-level protocol that works across a large range of devices exists in the Herald protocol, the author aims to suggest a payload to transfer over this protocol that allows for its use in either a centralised or decentralised contact tracing application. This will provide international interoperability whilst allowing local jurisdictions to tailor their approach to one acceptable by its residents.”</p>

<p>We also believe that more work needs to be done to ensure that any <a href="/herald/bluetooth/distance">RSSI to distance estimation formulae</a> takes account of the fact that some phone pairings appear to use a log-distance approach to scale their RSSI values, whereas others use an inverse-distance-squared approach. This leads to inaccuracies around the 2.5m mark.</p>

<h2 id="update-oxford-simulations-openabm-covid-19">Update: Oxford Simulations OpenABM-COVID-19</h2>

<p>Since the first draft of the paper was distributed, Oxford University’s Big Data Institute (BDI) 
have released OpenABM-COVID-19<a href="/herald/efficacy/bibliography#a-27">27</a>, a Jupyter notebook simulation of COVID-19 cases, spread, and hospitalisation
statistics given a population size, existing number of cases, and settings for various control methods.</p>

<p>The paper we have written has a new section in it detailing how to take the output
of the fair efficacy formula and apply it to an OpenABM simulation for COVID-19 spread.</p>

<p>Our team has created an extension to Oxford’s work to simulate the disease spread curve given
efficacy results presented in the Fair Efficacy Formula. This is currently undergoing review.
Once verified, the results and spread control charts shall be published here.</p>

                </div>
              </div>
            </div>
        </div>
        </div>
      <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/herald/docs" class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-5 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                    <li>
                      
                      <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://twitter.com/HeraldBluetooth">Twitter</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://herald-bluetooth.slack.com/">Slack</a>
</li>
                    
                    <li>
                      
                      <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                      
                      <a href="feed.xml">RSS</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://github.com/vmware/?q=herald">GitHub</a>
</li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-7 text-center text-md-right">
              <a href="/herald/" aria-label="Herald homepage"><img src="/herald/img/herald.png" class="logo" alt="Homepage"></a>
            </div>
        </div>
        <div class="row align-items-center">
          <div class="col copyright text-center text-md-right mt-4">
            © 2021 Herald Authors.
            <a href="http://vmware.github.io/" class="vm-logo">A VMware-backed project. <img src="/herald/img/vm-logo.png" alt="VMware logo"></a>
          </div>
        </div>
    </div>
</footer>


<!-- JS -->
<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/herald/js/jquery.matchHeight.js?1610982289774457475"></script>
<script src="/herald/js/scripts.js?1610982289774457475"></script>
    </div>
  </div>
</body>

</html>
