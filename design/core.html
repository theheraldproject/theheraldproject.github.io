<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/herald/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/herald/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/herald/css/styles.css?1610982289774457475">
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0">
<meta property="og:title" content="Herald core design">
<meta name="author" content="Herald Authors">
<meta property="og:locale" content="en_US">
<meta name="description" content="Core design philosophy and constraints">
<meta property="og:description" content="Core design philosophy and constraints">
<link rel="canonical" href="https://vmware.github.io/herald/design/core">
<meta property="og:url" content="https://vmware.github.io/herald/design/core">
<meta property="og:site_name" content="Herald Project">
<script type="application/ld+json">
{"description":"Core design philosophy and constraints","url":"https://vmware.github.io/herald/design/core","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://vmware.github.io/herald/herald/img/herald.png"},"name":"Herald Authors"},"author":{"@type":"Person","name":"Herald Authors"},"headline":"Herald core design","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <title>Herald Project Docs - Herald core design</title>



<body id="docs">
  <div class="container-fluid site-outer-container">
    <div class="site-container">
      <header class="site-header">
    <div class="site-header-content">
        <div class="logo">
            <a href="/herald/" aria-label="Herald homepage"><img src="/herald/img/herald.png" class="logo" alt="Homepage"></a>
        </div>
        <ul class="nav-menu" id="header-nav">
            <li class="home"><a href="/herald/" title="Herald Project">Home</a></li>
            <li class="blog"><a href="/herald/blog" title="Blog Posts">Blog</a></li>
            <li class="community"><a href="/herald/community" title="Community">Community</a></li>
            <li class="docs"><a href="/herald/docs">Documentation</a></li>
            <li class="efficacy"><a href="/herald/efficacy" title="Efficacy Paper">Efficacy Paper</a></li>
        </ul>
        <div class="nav-mobile-link">
            <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
        </div>
    </div>
</header>
      <div class="post-single-hero bg-color-med-blue">
        <div class="section">
            <div class="section-content">
              <h1>Herald core design</h1>
            </div>
        </div>
      </div>
        <div class="post-single-body">
        <div class="section section-card">
            <div class="section-content pt-4 pb-0">
              <div class="row">
                <div class="col-md-3">
                 <div class="row">
    <div class="dropdown mb-2">
        
            <span></span>
        
    </div>
</div>
                <nav class="navigation">
  <!-- If new pages are added to the site and the TOC needs to be updated, it
  can be overridden, using toc-mapping.yml -->
  

  
  <h5>Introduction</h5>
  <ul>
    
    <li>
      
        <a href="/herald/docs">Our documentation</a>
      
    </li>
    
  </ul>
  
  <h5>Applications</h5>
  <ul>
    
    <li>
      
        <a href="/herald/applications">Herald Applications</a>
      
    </li>
    
    <li>
      
        <a href="/herald/applications/ct">Contact Tracing</a>
      
    </li>
    
    <li>
      
        <a href="/herald/applications/p2p">Device to Device</a>
      
    </li>
    
    <li>
      
        <a href="/herald/applications/mesh">Bluetooth Mesh Gateways</a>
      
    </li>
    
  </ul>
  
  <h5>Herald Protocol</h5>
  <ul>
    
    <li>
      
        <a href="/herald/protocol/">About our protocol</a>
      
    </li>
    
    <li>
      
        <a href="/herald/protocol/custom">Non contact tracing uses</a>
      
    </li>
    
  </ul>
  
  <h5>Design Guide</h5>
  <ul>
    
    <li>
      
        <a href="/herald/design/">Herald's Design</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/core">Core philosophy</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/data">Data used</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/protocol">Protocol lifecycle</a>
      
    </li>
    
    <li>
      
        <a href="/herald/design/summary">Design summary</a>
      
    </li>
    
  </ul>
  
  <h5>Herald Payloads</h5>
  <ul>
    
    <li>
      
        <a href="/herald/payload">About Payloads</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/envelope">Herald Envelope Header</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/interop">Interoperability</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/common">Herald Common CT Inner Header</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/simple">Herald Simple Inner Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/secured">Herald Secured Inner Payload (Draft)</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/beacon">Herald Beacon Payload (Draft)</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/inner">Herald-compatible Inner Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/payload/outer">Custom outer &amp; inner payloads</a>
      
    </li>
    
  </ul>
  
  <h5>Development &amp; Integration Guide</h5>
  <ul>
    
    <li>
      
        <a href="/herald/guide/">How to integrate</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/code">About the code</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/api">API docs</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/add">Import Herald</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/ios">iOS app guide</a>
      
    </li>
    
    <li>
      
        <a href="/herald/guide/android">Android app guide</a>
      
    </li>
    
  </ul>
  
  <h5>About Contact Tracing</h5>
  <ul>
    
    <li>
      
        <a href="/herald/background">What is Contact Tracing?</a>
      
    </li>
    
    <li>
      
        <a href="/herald/background/glossary">Glossary of terms</a>
      
    </li>
    
    <li>
      
        <a href="/herald/background/approaches">Technology Approaches</a>
      
    </li>
    
  </ul>
  
  <h5>Bluetooth Research</h5>
  <ul>
    
    <li>
      
        <a href="/herald/bluetooth">Our Research</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/hardware">Hardware Issues</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/os">Operating System Issues</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/crowding">Crowding</a>
      
    </li>
    
    <li>
      
        <a href="/herald/bluetooth/distance">Distance Estimation</a>
      
    </li>
    
  </ul>
  
  <h5>Formal Specifications</h5>
  <ul>
    
    <li>
      
        <a href="/herald/specs">List and status</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/protocol">Herald Protocol</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-beacon">Beacon Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-extended">Extended Data Area</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-simple">Simple Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-secured">Secured Payload</a>
      
    </li>
    
    <li>
      
        <a href="/herald/specs/payload-interop">International Interoperability</a>
      
    </li>
    
  </ul>
  
</nav>

                </div>
                <div class="col-md-8 offset-md-1">
                

  

                <h1 id="core-design">Core Design</h1>

<p>Herald has been created for contact tracing, thus its requirements and characteristics have all been derived from peer reviewed epidemiology research (Ferretti, et al., 2020). The core design philosophy is therefore to ensure the efficacy of the technical solution is assessed against all relevant aspects of epidemiological requirements (Fowler, 2020). The guiding principles in the design of Herald were:</p>

<ul>
  <li>Mass adoption is crucial to the success of a contact tracing app, therefore eliminate all technical and social barriers to maximise deployability and user acceptance. This was achieved by (i) reducing software requirements down to iOS 9.3 and Android 5, (ii) enabling detection of interactions for non-advertising Android phones, (iii) enabling indefinite background operation on iOS and Android with no user action, and (iv) ensuring battery drain is down to 2% per hour.</li>
  <li>User compliance to app instructions to quarantine is dependent on public trust. This is achieved by (i) formally evaluating and publishing the efficacy of the technical solution according to epidemiological requirements to demonstrate its effectiveness and be transparent about its limitations, and (ii) publishing all the code, tools, test results, and documentation for inspection, independent evaluation, and security reviews.</li>
  <li>Accurate case isolation is essential for disease control and limiting the social economic impacts. This is achieved by (i) detecting all app users in the vicinity, (ii) delivering at least one distance measurement every 30 seconds for precise exposure risk estimation, and (iii) providing measurements continuously, consistently, and indefinitely for all app users.</li>
  <li>Most nations would prefer to use their own payload data for device identification, as this is a core component of their app security design. This is achieved by (i) delivering a generic protocol that only acts as a reliable data transport which is payload data agnostic, (ii) ensuring the design is applicable to both centralised and decentralised approaches, (iii) providing a common payload data wrapper for routing payload data without inspecting the content to enable interoperability across nations, and (iv) offering a reference implementation of a secure payload for adoption by nations without their own solution.</li>
  <li>Our understanding of COVID-19 is rapidly evolving, therefore the solution needs to be rapidly adaptable to take advantage of scientific advances. This is achieved by (i) keeping the protocol generic for simple interaction logging and distance estimation which is solution agnostic, (ii) delivering all raw measurements (RSSI, or received signal strength indicator) for analysis and distance estimation by the app, (iii) adopting the fastest possible sampling rate of circa 8 seconds to maximise duration measurement accuracy, and (iv) using a low energy sampling method to minimise impact on battery drain to ensure user acceptance.</li>
</ul>

<h2 id="epidemiological-constraints">Epidemiological constraints</h2>

<p>This section is mainly relevant to contact tracing apps, but the same holds true of any ‘exposure’ or ‘other device is nearby’ scenario.</p>

<p>Herald aims to deliver a technical solution according to epidemiological requirements. Analysis of epidemiological research and simulation models (Ferretti, et al., 2020, Hinch, et al., 2020, and Qureshi, et al., 2020) has shown the key technical parameters for consideration from an epidemiological perspective are population reach, efficacy and adaptability. Figure 2 presents a summary of the impact of app efficacy on case isolation and disease control.</p>

<p><img src="/herald/images/EstimationBenefits.png" alt="Figure 2. Benefits of Herald"></p>

<h3 id="population-reach">Population reach</h3>

<p>Ensuring the vast majority of the population can use the app, as an interaction involves two people, thus any barrier to adoption on one person has a significant impact. For instance, GlobalStats (Statcounter, 2020) data shows 68.02% of iPhones in the UK are running iOS 13.5 or later, thus only 68.01% x 68.02% = 46.27% of interactions between iOS-iOS devices are captured if the app requires iOS 13.5 or later. In contrast, Herald runs on iOS 9.3 or later, which covers 99.38% of UK iPhones, thus it captures 99.38% x 99.38% = 98.76% of interactions between iOS devices.</p>

<h3 id="efficacy">Efficacy</h3>
<p>Ensuring all other app users within 8 metres are detected, and the distance and duration of exposure is accurately captured by the app throughout an encounter of any length. Case isolation decisions are taken based on proximity and duration measurements in magnitudes of minutes and metres (e.g. exposure of 15 minutes at 2 metres). Exposure risk is cumulative, thus an
infection may stem from one long exposure, or the combination of many short exposures. For this reason, precise measurement of duration, achieved by a high sampling rate, is essential for precise risk estimation.</p>

<p>Herald will aim to take a sample once every 8 seconds but the sampling rate may degrade to once every 30 seconds when there are many devices in the vicinity. Distance estimation based on RSSI is inaccurate (Leith and Farrell, 2020), although accuracy is improved by taking additional samples, and also the precise translation from RSSI to physical distance remains an active area of research, therefore Herald aims to take as many samples as possible, and delivers the raw RSSI measurements for analysis by the app to take advantage of latest advances in distance estimation.</p>

<h3 id="adaptability">Adaptability</h3>
<p>Our understand of COVID-19 is fast evolving, thus an app, in particular, the underlying data analysis algorithms are likely to change frequently over time. A centralised approach will enable rapid change, where the app acts as a simple data logger, and the central server acts as the intelligent decision maker for case isolation based on latest scientific knowledge. However, a centralised approach may be unacceptable in some countries, thus the intelligence may be incorporated into the app itself for decentralised operation. Herald will support both centralised and decentralised approaches. The solution has been kept as simple as possible to ensure changes to our understanding of COVID-19 is unlikely to impact the protocol implementation for the foreseeable future.</p>

<h2 id="device-support">Device support</h2>

<p>Herald offers at least one RSSI measurement every 30 seconds for every iOS and Android device running the Herald protocol within 8 metres. Tests have shown Herald is able to achieve this service level in 93% of 30 second windows (continuity metrics, see Fowler, 2020) while ranging for 10 devices simultaneously. In practice, the sampling rate is much higher, often taking several measurements every 8 seconds, especially when there are fewer devices in the vicinity. Test results have shown Herald can achieve 96.24% continuity for 9 devices, 99.58% continuity for 3 Android devices, and 100% continuity for a pair of iOS devices. These tests ran for 10 to 20 hours. The detection range of Herald is also much greater than 8 metres in practice, as Bluetooth (BLE 4.0) range can be up to 100 metres.</p>

<p><img src="/herald/images/KeyFeatures.png" alt="Figure 3. Key features"></p>

<p>The cross-platform solution is compatible with 98.0% of UK smartphones and 97.5% of smartphones worldwide. Detailed analysis of smartphone OS adoption has shown Herald is compatible with over 97% of smartphones in many countries, including Germany (97.7%), France
(97.9%), India (98.2%), Australia (98.3%), New Zealand (98.3%), and USA (98.8%). Compatibility is lower in some countries, such as Kenya (88.3%), due to a large population using older Android phones without OS support for BLE, but compatibility is still sufficiently high for disease control according to epidemiological requirements.</p>

<p>This detailed design aims to provide a comprehensive description of the protocol to facilitate design and security reviews. The section will start with a description of the data items being handled by Herald, and then the protocol is presented as an overview, before expanding to platform specific details. This is necessary because the conceptual protocol is easy to understanding but the implementation details are complex due to iOS and Android constraints.</p>

<p>Next: <a href="/herald/design/data">Data in Herald</a></p>

                </div>
              </div>
            </div>
        </div>
        </div>
      <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/herald/docs" class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-5 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                    <li>
                      
                      <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://twitter.com/HeraldBluetooth">Twitter</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://herald-bluetooth.slack.com/">Slack</a>
</li>
                    
                    <li>
                      
                      <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                      
                      <a href="feed.xml">RSS</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://github.com/vmware/?q=herald">GitHub</a>
</li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-7 text-center text-md-right">
              <a href="/herald/" aria-label="Herald homepage"><img src="/herald/img/herald.png" class="logo" alt="Homepage"></a>
            </div>
        </div>
        <div class="row align-items-center">
          <div class="col copyright text-center text-md-right mt-4">
            © 2021 Herald Authors.
            <a href="http://vmware.github.io/" class="vm-logo">A VMware-backed project. <img src="/herald/img/vm-logo.png" alt="VMware logo"></a>
          </div>
        </div>
    </div>
</footer>


<!-- JS -->
<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/herald/js/jquery.matchHeight.js?1610982289774457475"></script>
<script src="/herald/js/scripts.js?1610982289774457475"></script>
    </div>
  </div>
</body>

</html>
