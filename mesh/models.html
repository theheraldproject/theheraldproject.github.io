<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/css/styles.css?1676884168425440110">
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v3.9.0">
<meta property="og:title" content="Herald Bluetooth MESH Models">
<meta name="author" content="Herald Project Contributors">
<meta property="og:locale" content="en_US">
<meta name="description" content="Custom Bluetooth MESH models for Herald healthcare use cases">
<meta property="og:description" content="Custom Bluetooth MESH models for Herald healthcare use cases">
<link rel="canonical" href="https://heraldprox.io/mesh/models">
<meta property="og:url" content="https://heraldprox.io/mesh/models">
<meta property="og:site_name" content="Herald Project">
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Herald Project Contributors"},"description":"Custom Bluetooth MESH models for Herald healthcare use cases","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://heraldprox.io/img/herald.png"},"name":"Herald Project Contributors"},"@type":"WebPage","headline":"Herald Bluetooth MESH Models","url":"https://heraldprox.io/mesh/models","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <title>Herald Project Docs - Herald Bluetooth MESH Models</title>



<body id="docs">
  <div class="container-fluid site-outer-container">
    <div class="site-container">
      <header class="site-header">
    <div class="site-header-content">
        <div class="row">
            <div class="col-md-2">
                <div class="logo">
                    <a href="/" aria-label="Herald homepage"><img src="/img/herald.png" class="logo" alt="Homepage"></a>
                </div>
            </div>
            <div class="col-md-9 offset-md-1">
                <ul class="nav-menu" id="header-nav">
                
                    <li class=""><a href="/">Home</a></li>
                
                    <li class=""><a href="/about">About</a></li>
                
                    <li class=""><a href="/community">Community</a></li>
                
                    <li class=""><a href="/blog">Blog</a></li>
                
                    <li class=""><a href="/download">Download</a></li>
                
                    <li class=""><a href="/docs">Documentation</a></li>
                
                    <li class=""><a href="/reference">Reference</a></li>
                
                    <li class=""><a href="/research">Research</a></li>
                
                </ul>
                <div class="nav-mobile-link">
                    <a href="javascript:void(0);" id="nav-mobile-toggle"></a>
                </div>
            </div>
        </div>
    </div>
</header>
      <div class="post-single-hero bg-color-med-blue">
        <div class="section">
            <div class="section-content">
              <h1>Herald Bluetooth MESH Models</h1>
            </div>
        </div>
      </div>
        <div class="post-single-body">
        <div class="section section-card">
            <div class="section-content pt-4 pb-0">
              <div class="row">
                <div class="col-md-2">
                 <div class="row">
    <div class="dropdown mb-2">
        
            <span></span>
        
    </div>
</div>
                <nav class="navigation">
  <!-- If new pages are added to the site and the TOC needs to be updated, it
  can be overridden, using toc-mapping.yml -->
  

  
  <h5>Reference</h5>
  <ul>
    
    <li>
      
        <a href="/reference">Introduction</a>
      
    </li>
    
    <li>
      
        <a href="/reference/arch">Architecture</a>
      
    </li>
    
    <li>
      
        <a href="/reference/personae">Personae</a>
      
    </li>
    
    <li>
      
        <a href="/efficacy/results">Efficacy Results</a>
      
    </li>
    
  </ul>
  
  <h5>Herald Payloads</h5>
  <ul>
    
    <li>
      
        <a href="/payload">About Payloads</a>
      
    </li>
    
    <li>
      
        <a href="/payload/envelope">Herald Envelope Header</a>
      
    </li>
    
    <li>
      
        <a href="/payload/interop">Interoperability</a>
      
    </li>
    
    <li>
      
        <a href="/payload/common">Herald Common CT Inner Header</a>
      
    </li>
    
    <li>
      
        <a href="/payload/simple">Herald Simple Inner Payload</a>
      
    </li>
    
    <li>
      
        <a href="/payload/secured">Herald Secured Inner Payload (Draft)</a>
      
    </li>
    
    <li>
      
        <a href="/payload/beacon">Herald Beacon Payload (Draft)</a>
      
    </li>
    
    <li>
      
        <a href="/payload/inner">Herald-compatible Inner Payload</a>
      
    </li>
    
    <li>
      
        <a href="/payload/outer">Custom outer &amp; inner payloads</a>
      
    </li>
    
  </ul>
  
  <h5>Herald MESH</h5>
  <ul>
    
    <li>
      
        <a href="/mesh">About MESH</a>
      
    </li>
    
    <li>
      
        <a href="/mesh/network">MESH Networking</a>
      
    </li>
    
    <li>
      
        <a href="/mesh/models">MESH Data Models</a>
      
    </li>
    
    <li>
      
        <a href="/mesh/api">Herald MESH API</a>
      
    </li>
    
  </ul>
  
  <h5>Formal Specifications</h5>
  <ul>
    
    <li>
      
        <a href="/specs">List and status</a>
      
    </li>
    
    <li>
      
        <a href="/specs/protocol">Herald Protocol</a>
      
    </li>
    
    <li>
      
        <a href="/specs/payload-beacon">Beacon Payload</a>
      
    </li>
    
    <li>
      
        <a href="/specs/payload-extended">Extended Data Area</a>
      
    </li>
    
    <li>
      
        <a href="/specs/payload-simple">Simple Payload</a>
      
    </li>
    
    <li>
      
        <a href="/specs/payload-secured">Secured Payload</a>
      
    </li>
    
    <li>
      
        <a href="/specs/payload-interop">International Interoperability</a>
      
    </li>
    
  </ul>
  
</nav>

                </div>
                <div class="col-md-9 offset-md-1">
                

  

                <h1 id="healthcare-vendor-models-from-herald">Healthcare Vendor Models from Herald</h1>

<p>THe Herald Project have implemented a number of Vendor models and are evaluating
these prior to suggesting to the Bluetooth SIG that they be adopted as part
of the Bluetooth MESH standard.</p>

<p>The Herald Project also re-use Bluetooth SIG MESH models, servers and clients.
This means that if you have a Bluetooth SIG MESH compliant device you will be
able to use it with a Herald Bluetooth MESH Network and be able to provision,
configure, and manage it using our permissively licensed open source software.</p>

<p>The idea is to create a set of standard models that enable multiple vendors
to interoperate within a public health ecosystem or Smart Hospital. The
Herald Project welcomes other vendors, Public Health Authorities, or
individuals with a passion for healthcare in helping us design and use these
models.</p>

<h2 id="herald-vendor-models">Herald Vendor Models</h2>

<p>The Herald Project is a Series of Linux Foundation Public Health. This means
we use the same Bluetooth Vendor ID (0x05f1) as other Linux Foundation projects,
with the main one being the 
<a href="https://zephyrproject.org/">Zephyr RTOS project</a>
which Herald uses as the base Operating System for all our wearable and
beacon applications.
All Herald Project models have IDs starting at 0x2000.</p>

<p>We have implemented a number of models for Bluetooth MESH:-</p>

<ul>
  <li>Herald Venue Beacon Server (0x2001)
    <ul>
      <li>This allows a MESH adminstrator to programme the data emitted over Bluetooth Low Energy to passing Bluetooth devices such as Mobile Phones</li>
      <li>This LE Beacon can be used for internal building navigation (if the Location URL field is set)</li>
      <li>These LE beacons can also be used to create a venue diary with auto check-in and check-out on a mobile phone which can be shared by a user with contact tracing teams</li>
      <li>This is used by the Herald MESH Relay application</li>
    </ul>
  </li>
  <li>Herald Presence Server (0x2002)
    <ul>
      <li>This server publishes nearby LE device aggregated information (E.g. Mean RSSI) over Bluetooth MESH</li>
      <li>This can be left as all Bluetooth LE devices, or a specific subset
        <ul>
          <li>All devices allows an anonymous analysis of footfall or occupancy density, useful for emergency evacuations or when trying to minimise social mixing in a hospital</li>
          <li>Restricting to just Bluetooth MESH or Bluetooth LE Herald Tags allows the tracking of Hospital Equipment</li>
          <li>The same mechanism could be used to track wristbands or wearables that were Bluetooth LE or MESH tags, useful for Dementia patients or at-risk patients</li>
        </ul>
      </li>
      <li>This is used by the Herald MESH Relay application</li>
    </ul>
  </li>
</ul>

<p>We are also considering implementing the following MESH models:-</p>

<ul>
  <li>Herald MESH Tag Server (ID TBD)
    <ul>
      <li>Allows remote reprogramming of a Bluetooth MESH tag</li>
      <li>Publishes regular presence information to the MESH when the device it is attached to is moving</li>
      <li>Acts as a MESH low power node when the device is not moving, using a nearby MESH Relay as a ‘Friend’ to store presence information, and thus enter a low power sleep mode</li>
      <li>Provides additional security for equipment tags over Bluetooth Low Energy</li>
      <li>To be used by the Herald MESH Tag application for long term, low power, tags using a low-power Herald Wearable V2 tag</li>
    </ul>
  </li>
</ul>

<h2 id="linux-foundation-mesh-models-and-operation-codes">Linux Foundation MESH models and Operation Codes</h2>

<p>There are currently no other vendor models being used by other Linux Foundation projects.
We have defined a set of Linux Foundation Op Codes and try to ensure we keep other
Linux Foundation projects aware of these to facilitate interoperability. These are:-</p>

<ul>
  <li>All of these are currently DRAFT op codes</li>
  <li>Get Model Status (0x01)</li>
  <li>Set Model Status (0x02) with acknowledgement</li>
  <li>Set Model Status (0x03) without acknowledgement</li>
  <li>Status Message (0x04)</li>
</ul>

<p>Note that all of the above codes must be used with the Linux Foundation Vendor ID (0x05f1).</p>

<h2 id="bluetooth-sig-standard-models-used-by-herald">Bluetooth SIG Standard Models used by Herald</h2>

<p>The following are required for all MESH devices in the Bluetooth MESH specification and
so are present in all Herald MESH applications:-</p>

<ul>
  <li>MESH Configuration Server</li>
  <li>MESH Health Server</li>
</ul>

<p>We are also considering using the following standard models:-</p>
<ul>
  <li>MESH Time Server on all Herald MESH Modem devices, if enabled, with time from NTP sources</li>
  <li>MESH Time Client on all Herald MESH Relay and Tag devices, subscribed to the MESH Modem time group
    <ul>
      <li>This can also be used to expose a Bluetooth Low Energy Time Service via GATT on devices with a Herald Venue Beacon defined</li>
    </ul>
  </li>
</ul>

<p>The Herald Modem also uses the heartbeat functionality of the Health Server to
publish network communication diagrams and performance information to
RabbitMQ. This allows it to be tracked over time and visualised in cloud native
applications.</p>

<p>The Herald Project also adopts a standard layout of MESH Elements if supported
by the device:-</p>

<ul>
  <li>Element 1 (Primary Element) - Bluetooth SIG standard functionality
    <ul>
      <li>Configuration Server</li>
      <li>Health Server</li>
      <li>(Future) Time Client or Time Server</li>
    </ul>
  </li>
  <li>Element 2 - Presence related services
    <ul>
      <li>OnOff server (to denote whether to enable the Presence Server)</li>
      <li>Herald Presence Server - which can be subscribed to</li>
    </ul>
  </li>
  <li>Element 3 - Beacon related services
    <ul>
      <li>OnOff server (to denote whether to expose a Herald Venue Beacon and GATT Time Service)</li>
      <li>Venue Beacon Server (to programme the information for the Beacon)</li>
    </ul>
  </li>
</ul>

<h2 id="future-additions">Future additions</h2>

<p>We are also considering the future mechanisms:-</p>

<ul>
  <li>File Transfer Model
    <ul>
      <li>To open direct Bluetooth Low Energy connections between MESH nodes for file transfer</li>
      <li>A secure MESH way to configure the <a href="https://www.bluetooth.com/specifications/specs/object-transfer-service-1-0/">GATT Bluetooth Object Transfer service</a>
</li>
      <li>We’re interested in this to enable Over The Air (OTA) application and firmware updates to MESH connected devices</li>
      <li>The MESH Modem will transfer files to a select subset of MESH Relays, then instruct the relevant MESH devices to open an LE connection and update themselves from this binary</li>
      <li>This will exchange LE binding keys over Bluetooth MESH directly between the two nodes involved in the transfer, making it more secure than LE Object Transfer alone (Effectively the MESH message is an Out of Band security key exchange)</li>
      <li>The secure bootloader will validate the update before applying it, preventing unsigned or tampering of updates over the air</li>
      <li>MESH is not suitable for large file transfers, so this hybrid mechanism may be useful</li>
    </ul>
  </li>
</ul>

<h2 id="herald-mesh-standard-publishsubscribe-model">Herald MESH standard publish/subscribe model</h2>

<p>Herald does not hardcode the group IDs used for publication or subscription of MESH messages.
This is to allow people to customise their messages. When a Herald MESH Modem is used to
configure a network, however, it will take a standard approach to the types of group it
creates, and which nodes are added as subscribers or publishers.</p>

<ul>
  <li>Presence Information
    <ul>
      <li>All Herald Presence Servers are assigned a Presence application key and instructed to publish their messages to a Presence Messages Group</li>
      <li>This is a different application key per Presence Server, ensuring that a compromised MESH node cannot decode all presence information</li>
      <li>All Herald MESH Modems’ Presence Clients subscribe to the Presence Messages Group and may pass this onto the computer they are attached to
        <ul>
          <li>Which computer receives the messages is determined by the server-side HA/DR configuration and out of scope of the MESH model</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Beacon Configuration
    <ul>
      <li>All MESH Relays with a Beacon service are assigned a Beacon application key and does not publish or subscribe their models</li>
      <li>Each application key is different per beacon, ensuring that a compromised MESH node cannot maliciously set all beacon information</li>
      <li>All Herald MESM Modems’ Venue Beacon Clients can set and get Beacon information if they hold this particular application key</li>
    </ul>
  </li>
</ul>

<h2 id="find-out-more">Find out more</h2>

<p>You can now view the <a href="/mesh/api">Herald MESH API</a> page to find out how to interact with this API.</p>

                </div>
              </div>
            </div>
        </div>
        </div>
      <div class="section section-background-darkest-blue">
    <div class="section-content">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-8">
                <h5>Getting Started</h5>
                <p>To help you get started, see the documentation.</p>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-3 offset-lg-1">
                <p><strong></strong></p>
                <a href="/docs" class="btn btn-sm btn-primary btn-no-border">Documentation</a>
            </div>
        </div>
    </div>
</div>

<footer class="section site-footer">
    <div class="section-content">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-md-5 mb-3 mb-md-0">
                <ul class="social-links text-center text-md-left">
                    
                    <li>
                      
                      <i class="fab fa-twitter fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://twitter.com/HeraldProximity">Twitter</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-slack fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://slack.lfph.io/">Slack</a>
</li>
                    
                    <li>
                      
                      <i class="fa fa-rss fa-lg fa-fw mr-1"></i>
                      
                      <a href="feed.xml">RSS</a>
</li>
                    
                    <li>
                      
                      <i class="fab fa-github fa-lg fa-fw mr-1"></i>
                      
                      <a href="https://github.com/theheraldproject">GitHub</a>
</li>
                    
                </ul>
            </div>
            <div class="col-12 col-md-7 text-center text-md-right">
              <a href="/" aria-label="Herald homepage"><img src="/img/herald.png" class="logo" alt="Homepage"></a>
            </div>
        </div>
        <div class="row align-items-center">
          <div class="col copyright text-center text-md-right mt-4">
            The Herald Project is a series of the <a target="_new" href="https://www.lfph.io/join/projects/">Linux Foundation Public Health</a>.
            © 2023 Herald Project Contributors.
          </div>
        </div>
    </div>
</footer>


<!-- JS -->
<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script>

<script src="/js/jquery.matchHeight.js?1676884168425440110"></script>
<script src="/js/scripts.js?1676884168425440110"></script>
    </div>
  </div>
</body>

</html>
